% Created 2025-07-23 Wed 11:02
% Intended LaTeX compiler: xelatex
\documentclass{stage}

% ==== Mixed Scripts ====
% ---- Chinese, Japanese ----
\usepackage{xeCJK}
\xeCJKsetup{AutoFallBack=true}
\setCJKmainfont{BIZ UDMincho}
\setCJKfallbackfamilyfont{\CJKrmdefault}{Sarasa Fixed SC}

% ---- Furigana ----
\usepackage{ruby}
% Tune look & spacing
\renewcommand\rubysep{0.0ex}    % vertical gap (default âˆ’0.5 ex)
\renewcommand\rubysize{0.5}     % ruby 50% of main size
\setlength{\lineskiplimit}{2pt} % prevents lines from touching when ruby is tall

% ---- Symbols ----
\usepackage{unicode-math}
\setmathfont{STIX Two Math}

\usepackage{newunicodechar}
% For symbols found in the unicode-math font
\newunicodechar{â†’}{\(â†’\)}
\newunicodechar{â†}{\(â†\)}
\newunicodechar{â†“}{\(â†“\)}
\newunicodechar{â†‘}{\(â†‘\)}
\newunicodechar{âŸ¶}{\(âŸ¶\)}
\newunicodechar{âŸµ}{\(âŸµ\)}
\newunicodechar{â‡„}{\(â‡„\)}
\newunicodechar{â‡†}{\(â‡†\)}
\newunicodechar{âŸ·}{\(âŸ·\)}
\newunicodechar{âŸº}{\(âŸº\)}
\newunicodechar{â—‹}{\(â—‹\)}
\newunicodechar{âœ“}{\(âœ“\)}

% For symbols not found in the unicode-math font
\newfontfamily\symbolsfont{Sarasa Mono CL}[Scale=1.0]
\newunicodechar{â®‚}{{\symbolsfont â®‚}}
\newunicodechar{â®€}{{\symbolsfont â®€}}

% ---- Emojis ----
\usepackage{bxcoloremoji}

% ---- Translations ----
% Mark any inline translation in a smaller, lighter style
\usepackage{xcolor}             % provides gray
\newcommand{\trans}[1]{\begingroup\small\color{gray}#1\endgroup}
\NewDocumentEnvironment{translation}{}
  {\par\small\color{gray}\ignorespaces}
  {\par\ignorespacesafterend}

% ---- Customize title ----
% Make title bigger
% titling hooks before \maketitle, so it overrides the size even though the
% class redefines the command internally.
\usepackage{titling}
\pretitle{\begin{center}\Huge\bfseries\textsc}
\posttitle{\end{center}}
\preauthor{\begin{center}\Large}
\postauthor{\end{center}}
\author{Jane Doe}
\date{}
\title{ox-stage test (xeJC)}
\begin{document}

\maketitle

\begin{castpage}
  \addcharacter{Alice}{a curious girl \ruby{å¥½å¥‡å¿ƒ}{ã“ã†ãâ†“ã—ã‚“}\ruby{æ—ºç››}{ãŠã†ã›ã„â—‹}ãª\ruby{å°‘å¥³}{ã—ã‚‡â†“ã†ã˜ã‚‡}}
  \addcharacter{Bob}{her thoughtful friend å½¼å¥³ã®å‹é”}
\end{castpage}

\act
\scene
\opensd{Opening stage direction å¼€åœº\ruby{èˆå°}{wutÃ¡i}æŒ‡å¯¼}

\dialog{Alice}{Look at these flowers, Bob! \coloremoji{ğŸŒ·ğŸ˜}\\
  \trans{çœ‹çœ‹è¿™äº›èŠ±ï¼Œé²å‹ƒï¼}}

\stage{Inter-dialogue stage direction}

\dialog{Bob}{Theyâ€™re beautiful. \charsd{\introduce{ALICE} kneels to smell them.}}
\dialog{Alice}{Do you think theyâ€™ll bloom tomorrow?}

Some other text:\\[0pt]

Japanese only characters: ã‚ç·‘å³¶æ¹¯å–¶\\[0pt]
These symbols â†’â†â†“â†‘âŸ¶âŸµâ‡„â‡†âŸ·âŸºâ—‹âœ“ are entered without a wrapper.\\[0pt]
These symbols \(\char"26E8\symbol{"26E5}\) are entered by codepoints.\\[0pt]
These symbols \(\Longleftrightarrow\)\ensuremath{\longleftrightarrow} are
entered by names.\\[0pt]

These symbols {\symbolsfont âœ”âœ—} are entered using
\texttt{\textbackslash symbolsfont}.\\[0pt]
\end{document}